\chapter{Conclusions}
\label{chap:conclusions}

This thesis had two primary goals: to quantify approximation error in MGXS and to develop new spatial homogenization methods to accelerate the convergence of MGXS on heterogeneous MC tally meshes. These goals were motivated by the desire to obtain Monte Carlo-quality solutions with computationally efficient deterministic neutron transport methods. The following summarizes the key accomplishments demonstrated by this thesis to meet this over-arching vision:

%This was accomplished with a simulation framework that evaluated the MGXS generated by stochastic transport simulations with OpenMC for use in deterministic multi-group transport simulations with OpenMOC. The \textit{i}MGXS spatial homogenization scheme was developed to directly model all energy and spatial self-shielding effects to generate accurate MGXS with a single whole-core MC calculation. 

%This thesis had two primary goals: to quantify approximation error in MGXS and to develop new spatial homogenization methods to accelerate the convergence of MGXS on heterogeneous MC tally meshes. This was accomplished with a simulation framework that evaluated the MGXS generated by stochastic transport simulations with OpenMC for use in deterministic multi-group transport simulations with OpenMOC. The \textit{i}MGXS spatial homogenization scheme was developed to directly model all energy and spatial self-shielding effects to generate accurate MGXS with a single whole-core MC calculation. 

\begin{itemize}

\item \textbf{Design and implementation of software simulation infrastructure.} The simulation framework replaces the multi-level approach to directly model all energy and spatial self-shielding with a single whole-core OpenMC calculation of the complete heterogeneous geometry to generate MGXS for use in OpenMOC.

\item \textbf{Systematic evaluation of bias between OpenMC and OpenMOC.} The approximations made to collapse MGXS in energy, space and angle were quantified for simple PWR benchmarks. The impact of the flux separability approximation was rigorously quantified, and a method based on SuPerHomog\'{e}n\'{e}isation factors was implemented to ensure reaction rate consistency between OpenMC and OpenMOC.

\item \textbf{Design and implementation of pin-wise spatial homogenization schemes.} The LNS scheme uses an engineering-based nearest of a reactor's geometric configuration to assign MGXS to each fuel pin. The iMGXS scheme uses machine learning to detect MGXS clustering in ``noisy'' MC tally data, and assigns MGXS to fuel pins without any knowledge of a reactor's geometric configuration.

%\item \textbf{Design and implementation of pin-wise spatial homogenization schemes.} The LNS scheme employs an engineering-based nearest neighbor analysis of the geometric configuration of a reactor core to assign MGXS to each fuel pin. The iMGXS scheme uses unsupervised machine learning methods to detect MGXS clustering in ``noisy'' MC tally data and infer the optimal assignment of MGXS to each fuel pin.

\item \textbf{Quantified the predictive accuracy of the LNS and \textit{i}MGXS schemes.} Both schemes were shown to reduce pin-wise U-238 capture rate errors by a factor of four by adequately accounting for spatial self-shielding effects from core heterogeneities. The \textit{i}MGXS scheme performed better than LNS for fuel pins along assembly-assembly and assembly-reflector interfaces. 

%The iMGXS scheme achieves the same accuracy as LNS with up to two orders of magnitude fewer MGXS clusters for the quarter core BEAVRS model.

%The OpenMOC solutions were compared to reference solutions generated with OpenMC for six heterogeneous PWR benchmarks. Both schemes reduced errors for U-238 capture rates predicted by OpenMOC relative to a reference OpenMC solution by a factor four. The iMGXS scheme 

\item \textbf{Quantified the MC histories needed to converge the MGXS for each scheme.} Both schemes were shown to require at least an order of magnitude fewer MC particle histories to converge MGXS for accurate deterministic calculations than a reference MC calculation. 

%\item Designed and implemented software framework to generate MGXS with OpenMC for use in OpenMOC. The simulation framework replaces the multi-level approach to model self-shielding with a single whole-core OpenMC calculation of the complete heterogeneous geometry to generate MGXS for use in OpenMOC.

%\item Designed inferential multi-group cross section methodology for pin-wise spatial homogenization of MGXS. The iMGXS data processing pipeline uses machine learning methods to detect MGXS clustering in ``noisy'' MC tally data and infer the optimal assignment of fuel pins to spatial homogenization zones.
\end{itemize}

%These goals were motivated by the desire to obtain Monte Carlo-quality solutions with computationally efficient deterministic neutron transport methods.

%The \textit{i}MGXS scheme is a data processing pipeline which uses machine learning algorithms to infer the clustering of MGXS in fuel pins due to spatial self-shielding effects with limited supervision or engineering domain knowledge.

%The \textit{i}MGXS scheme was demonstrated to identify spatial self-shielding effects from ``noisy'' MC tally data without any knowledge of a reactor's geometric configuration. The scheme was shown to reduce pin-wise U-238 capture rate errors by a factor of four by adequately accounting for spatial self-shielding effects from core heterogeneities including control rod guide tubes, burnable poisons, and reflectors with on the order of only ten MGXS clusters. Furthermore, the \textit{i}MGXS scheme was shown to be advantageous over geometric heuristic approaches such as LNS which must be highly customized for specific types of core geometries, and which fail to distinguish MGXS clusters for pins at assembly-assembly and assembly-reflector interfaces. Finally, the \textit{i}MGXS scheme was shown to require at least an order of magnitude fewer MC particle histories to converge MGXS for accurate deterministic calculations than a reference MC calculation. 

%\textbf{The \textit{i}MGXS scheme enables deterministic reactor physics simulations to produce accurate results from MGXS generated by MC faster than would be possible with a direct calculation with MC.} This thesis demonstrated the promise for \textit{i}MGXS as a means to efficiently generate MGXS with reactor agnostic MC calculations of the complete heterogeneous geometry in a single step.

\textbf{The \textit{i}MGXS scheme enables deterministic reactor physics simulations to produce accurate results from MGXS generated by MC faster than would be possible with a direct calculation with MC.} Furthermore, the \textit{i}MGXS scheme was shown to be advantageous over geometric heuristic approaches such as LNS which must be highly customized for specific types of core geometries. This thesis demonstrated the promise for \textit{i}MGXS as a means to efficiently generate MGXS with reactor agnostic MC calculations of the complete heterogeneous geometry in a single step.

This thesis identified several issues which must be investigated in the future in order for \textit{i}MGXS to be useful in a production code setting. First, a systematic evaluation of the types of features, as well as algorithms for dimensionality reduction and clustering, which may be used in \textit{i}MGXS should be performed to better understand their impact on the resulting clustered geometry. A future study should also score each configuration of the \textit{i}MGXS data processing pipeline based on how many MC particle histories  each scheme requires to accurately identify MGXS clusters from ``noisy'' MC tally data. 

Future work should also consider employing \textit{i}MGXS in calculations with thermal-hydraulic feedback and nuclide depletion where the moderator density, fuel temperature and burnup will be needed as features to predict MGXS clustering. In addition, new methods must be developed to compute transport-corrected MGXS with MC which appropriately account for anisotropic scattering, thereby eliminating the isotropic in lab scattering approximations used throughout this work. Finally, this thesis may serve as inspiration to employ machine learning algorithms to automate the time-consuming process of selecting reduced energy group structures and their optimal energy group boundaries for MGXS.

%evaluate \textit{i}MGXS scheme:
%-add anisotropic scattering to OpenMOC to enable solution of the ``correct'' problem
%-systematic study of featues -- ones actually matter? \\
%-systematic study to understand impact of dimensionality reduction \\
%-systematic study to understand impact of clustering algorithms \\
%-more research into model selection schemes -- none of them robustly works for my case studies! \\
%-evaluate \textit{i}MGXS with clustering ``on-the-fly'' with noisy MC tally data \\
%-can \textit{i}MGXS reduce the number of necessary energy groups?? \\

%reach goals:\\
%-multi-physics applications: moderator density, fuel temperature, burnup, etc. as features \\
%-machine learning to optimize energy group structures \\

%-speed up OpenMOC full core: \\
%  -find a way use quarter assembly CMFD mesh \\
%  -linear source to reduce number of spatial zones \\
%  -vectorize transport solver over energy groups \\
